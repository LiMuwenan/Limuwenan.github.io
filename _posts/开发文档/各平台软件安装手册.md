---
layout: post
cover: 'assets/images/shiva.jpg'
title: Style Guide
permalink: /StyleGuide1
date: 2017-11-30 04:00:00
tags: guide
author: ligen
---

# 1 MYSQL

[mysql官方下载网站](https://downloads.mysql.com/archives/community/)

该网站中包含各平台，各版本的mysql程序

## Windows

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-windows1.png)

下载好该安装包，进行解压。

解压后设置环境变量

**环境变量**

变量名 MYSQL_HOME

变量值 mysql解压路径

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-windows2.png)

添加PATH

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-windows3.png)

**修改配置文件**

在安装目录下修改配置文件

没有my.ini文件就自己新建一个

```ini
[mysql]
#设置mysql客户端默认字符集
default-character-set=UTF8MB4
[mysqld]
#设置3306端口
port=3306
#mysql安装目录
basedir=D:\Program\mysql-8.0.21-winx64
#mysql数据存放目录
datadir=D:\Program\mysql-8.0.21-winx64\data
#允许最大连接数
max_connections=200
#允许连接失败的次数
max_connect_errors=10
#默认使用“mysql_native_password”插件认证
default_authentication_plugin=mysql_native_password
#服务端使用的字符集默认为8比特编码的latin1字符集
character-set-server=UTF8MB4
#开启查询缓存
explicit_defaults_for_timestamp=true
#创建新表时将使用的默认存储引擎
default-storage-engine=INNODB
#等待超时时间秒
wait_timeout=60
#交互式连接超时时间秒
interactive-timeout=600
```

**管理员模式进行配置**

安装服务并设置开机启动等

```shell
# 卸载服务（第一次安装可以不执行）
net stop mysql
mysqld remove

# 安装服务
mysqld --install

# 初始化密码
mysqld --initialize --console

/0QpoVRdAX4Y

# 启动mysql修改密码
net start mysql

# 登录，修改root用户 密码和访问权限
$ mysql -u root -p'初始密码'
$ ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';
$ use mysql;
$ update user set host='%' where host='localhost';
$ delete from user where host !='%';
$ flush privileges;
$ ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '新密码';
$ quit;

#测试登录
$ mysql -u root -p
'150621'
```

## Linux

### centos安装

**选择对应linux版本的rpm包**

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-linux1.png)

使用wget直接下载到linux系统或者下载到windows端使用winscp传入

**解压**

将该包解压

```shell
tar -vxf mysql-5.7.9-1.el7.x86_64.rpm-bundle.tar -C mysql
```

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-linux2.png)

**清理遗留文件**

清理系统中与mysql冲突的旧文件或者其它文件

先删除所有 mariadb 文件

```shell
rpm -qa | grep mariadb
```

如果有相关的软件，使用yum删除

```shell
yum -y remove mariadb-xxxx
```

**进行安装**

因为依赖关系，所以必须按照下面的顺序安装

```shell
rpm -ivh mysql-community-{common,libs,client,server}-*
```

**启动并查看**

```shell
#启动mysql
systemctl start mysqld.service
#查看mysql运行状态
systemctl status mysqld.service
```

**查看默认密码、登录并修改密码**

该密码在/var/log/mysqld.log中

```shell
grep "password" /var/log/mysqld.log   xl?syv!0eJ1X
SLZ3ty#Yl<g9
```

![](https://raw.githubusercontent.com/LiMuwenan/PicBed/master/img/dev/install/mysql-linux3.png)

使用上面的密码登录

```shell
mysql -u root -p
```

修改默认密码

```mysql
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';
// 7.0以上版本修改的密码需要有大小写字母、数字、特殊字符
```

**默认配置文件**

配置文件默认是 /etc/my.cnf 

在其中配置

```shell
skip-grant-tables
```

即可进行免密登录



### 使用tar.gz包安装



## Docker

```
docker pull mysql:8.0
docker run -p 3306:3306
	-e MYSQL_ROOT_PASSWORD=150621
	-e TZ=Asia/Shanghai
	-v D:/Program/Docker/mount/mysql/data:/var/lib/mysql/
	-v D:/Program/Docker/mount/mysql/logs:/var/log/mysql/
	-v D:/Program/Docker/mount/mysql/conf/my.cnf:/etc/mysql/my.cnf
	--name mysql_tinode
	--restart=always
	--privileged=true
	-d mysql:8.0.21
```

配置文件

```

```

> docker run -p 3306:3306 --privileged=true -e MYSQL_ROOT_PASSWORD=150621 -e TZ=Asia/Shanghai -v D:/Program/Docker/mount/mysql/data:/var/lib/mysql/:rw -v D:/Program/Docker/mount/mysql/logs:/var/log/mysql/:rw -v D:/Program/Docker/mount/mysql/conf/:/etc/mysql/ --name mysql_tinode --restart=always -d mysql:8.0.21



# 2 Java

## Windows



## Linux

# 3 Go

## Windows



## Linux

```
tar -vxf golangname.tar.gz
```

解压出来的文件夹移动到 `/usr/local/`

配置路径 PATH GOPATH GOROOT 环境变量

```
vi /etc/profile

export GOROOT="/usr/local/go"
export GOPATH="/home/ligen/go"
export GOBIN=$GOPATH/bin
export PATH=$PATH:$GOROOT/bin
```

最后刷新环境变量

```
source /etc/profile

go version
go env
```

更换goproxy

```
go env -w GOPROXY=https://goproxy.cn,direct
```







# 4 Docker

[docker官网包含下载方式、手册等](https://docs.docker.com/)

下载安装包

## Windows

可以基于`WSL2`或者`Hyper-V`

1. 主板开启虚拟化`VT`或者`SVM`

2. 开启`适用于Linux的windows子系统`和`虚拟机平台`

3. 微软商店下载ubuntu

4. 打开ubuntu如果报错，执行下面的命令更新内核

```
wsl --update
```

打开即可设置用户名密码





**开启windows的`Hyper-V`和`容器`功能**

控制面板--程序和功能--启用或关闭Windows功能--勾选上述两个功能

**安装**

下载了windows安装包启动，可以不选wsl

docker默认安装在 `c:\Program Files\Docker` 如果需要安装到其它盘，假设D盘，可以创建软链接

```shell
mklink /j "c:\Program Files\Docker" "d:\Program\Docker"
```

安装好后就可直接启动

```shell
docker version
```

查看是否安装成功

> Client:
>  Cloud integration: v1.0.24
>  Version:           20.10.14
>  API version:       1.41
>  Go version:        go1.16.15
>  Git commit:        a224086
>  Built:             Thu Mar 24 01:53:11 2022
>  OS/Arch:           windows/amd64
>  Context:           default
>  Experimental:      true
>
> Server: Docker Desktop 4.8.2 (79419)
>  Engine:
>   Version:          20.10.14
>   API version:      1.41 (minimum version 1.12)
>   Go version:       go1.16.15
>   Git commit:       87a90dc
>   Built:            Thu Mar 24 01:46:14 2022
>   OS/Arch:          linux/amd64
>   Experimental:     false
>  containerd:
>   Version:          1.5.11
>   GitCommit:        3df54a852345ae127d1fa3092b95168e4a88e2f8
>  runc:
>   Version:          1.0.3
>   GitCommit:        v1.0.3-0-gf46b6ba
>  docker-init:
>   Version:          0.19.0
>   GitCommit:        de40ad0

默认情况下，Server部分的OS/Arch属性展示了当前操作系统是linux/amd64。这是因为Docker Daemon是运行在Hyper-V虚拟机中的一个轻量级Linux上，这种情况下只能在Windows版本Docker上运行Linux容器。

如果想要运行原生Windows容器，可以右击windows通知栏中的Docker鲸鱼图标，并且切换到Windows容器

或者进入到 `c:\Program Files\Docker\Docker` 安装目录

```shell
.\dockercli -SwitchDaemon
```



## Linux

```
yum list docker
yum -y install docker
systemctl start docker
```

```
1、卸载旧版本
apt-get remove docker docker-engine docker.io containerd runc

2、安装前提依赖
apt update
apt-get install ca-certificates curl gnupg lsb-release


3、安装GPG证书
curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -

4、写入软件源信息
add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"

5、安装新版本
apt-get install docker-ce docker-ce-cli containerd.io


6、用户组相关（这步比较重要，否则后续查看docker版本的时候会有报错提示并且也无法启动docker：Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.24/version": dial unix /var/run/docker.sock: connect: permission denied）

sudo groupadd docker       #添加docker用户组
sudo gpasswd -a XXX docker     #将当前用户添加至docker用户组，其中XXX为用户名
newgrp docker       #更新docker用户组

7、启动docker

systemctl start docker

docker version（查看docker版本）

8、安装必要工具

apt-get -y install apt-transport-https ca-certificates curl software-properties-common

9、配置 docker

# 添加 docker 配置 /etc/docker/daemon.json（需要在目录下自行添加daemon.json）
{
"exec-opts": ["native.cgroupdriver=systemd"],
"log-driver": "json-file",
"log-opts": {
"max-size": "100m"
},
"storage-driver": "overlay2",
 "registry-mirrors": ["https://hub-mirror.c.163.com","https://gxeo3yz7.mirror.aliyuncs.com"]
}

10、重启docker

service docker restart
```



# 5 python

## windows

exe自动安装，注意添加PATH和所有用户安装

在下面路径为pip换源

```
C:\Users\LG\AppData\Roaming\pip\pip.ini

[global]
index-url = https://mirrors.aliyun.com/pypi/simple
trusted-host = mirrors.aliyun.com
```



## Linux

```
apt install python3 python3-pip
```

换源

```
~/.pip/pip.conf
[global]
index-url = https://mirrors.aliyun.com/pypi/simple
trusted-host = mirrors.aliyun.com
```





# 6 Redis

## windows

https://github.com/MicrosoftArchive/redis/releases?page=1

msi直接安装





## Docker

```bash
docker search redis
docker pull redis:3.2
# 总是开机启动
# 挂载端口,宿主机端口:镜像内端口
# 给容器取名字
# 挂载目录
# 后台启动redis镜像
# 以配置文件方式启动，最终以挂载目录的配置文件启动
docker run --restart=always
			-p 6379:6379
			--name redis_test2
			-v D:/Program/Docker/mount/redis/redis_test/redis_test.conf:/etc/redis/redis.conf
			-v D:/Program/Docker/mount/redis/redis_test/data:/data
			-d redis:3.2
			redis-server /etc/redis/redis.conf
```

redis配置文件

```
# 限制只能本地访问
# bind 127.0.0.1

# 开启保护模式，限制为本地访问，默认 yes
# protected-mode no

#默认no，改为yes意为以守护进程方式启动，可后台运行，除非kill进程，改为yes会使配置文件方式启动redis失败
daemonize no  

# 数据库个数（可选），我修改了这个只是查看是否生效。。
databases 16 

# 输入本地redis数据库存放文件夹（可选）
# dir  ./   

# redis持久化（可选）
# appendonly yes  

# redis 连接密码
# requirepass  123456 
```



> docker run --restart=always -p 6379:6379 --name redis_tinode -v D:/Program/Docker/mount/redis/redis_tinode/redis_tinode.conf:/etc/redis/redis.conf -v D:/Program/Docker/mount/redis/redis_tinode/data:/data -d redis:3.2 redis-server /etc/redis/redis.conf

# 7 Nacos

## Docker

nacos-server

```
docker pull nacos/nacos-server:v2.0.4
docker run --name nacos_tinode -e MODE=standalone -p 8848:8848 -p 9848:9848 -p 9849:9849 -d nacos/nacos-server:v2.0.4
```

# 8 Elastic Search

## Docker

设置挂载目录

```
logs config plugins data
```

在config文件夹中创建elasticsearch.yml

```yml
http.host: 0.0.0.0
```

启动脚本

```
docker pull elasticsearch:8.7.1
docker run --name es -p 9200:9200  -p 9300:9300 
       -e "discovery.type=single-node" 
       -e ES_JAVA_OPTS="-Xms84m -Xmx512m" 
       -v D:/Program/Docker/mount/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml
       -v D:/Program/Docker/mount/es/data:/usr/share/elasticsearch/data 
       -v D:/Program/Docker/mount/es/plugins:/usr/share/elasticsearch/plugins 
       -d elasticsearch:8.7.1
```



> docker run --name es -p 9200:9200  -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms84m -Xmx512m" -v D:/Program/Docker/mount/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v D:/Program/Docker/mount/es/data:/usr/share/elasticsearch/data -v D:/Program/Docker/mount/es/plugins:/usr/share/elasticsearch/plugins -d elasticsearch:8.7.1



# 9 Maven

## windows

解压到目录，配置环境变量

在`/conf/setting.xml`中配置镜像

```xml
<mirror>
 <id>alimaven</id>
 <name>aliyun maven</name>
 <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
 <mirrorOf>central</mirrorOf>
</mirror>
```

配置本地仓库位置

```xml
<localRespository>
D:\Program\apache-maven-3.6.3\local
</localRespository>
```

# 10 
